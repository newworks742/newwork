{"version":3,"file":"7-BC7wlXH-.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/admin/products/_page.server.js","../../../.svelte-kit/adapter-node/nodes/7.js"],"sourcesContent":["import { g as deleteproduct, h as editproduct, i as createproduct } from \"../../../../chunks/mongoActions.js\";\nimport { a as getAllProducts } from \"../../../../chunks/mongoLoads.js\";\nconst load = async () => {\n  try {\n    const { allBlogs, error } = await getAllProducts();\n    return { allBlogs, error };\n  } catch (error) {\n    console.error(\"Error in load:\", error);\n    return {\n      allBlogs: [],\n      error: \"Unexpected error loading blogs\"\n    };\n  }\n};\nconst actions = {\n  //   createblogs: async ({ request }) => {\n  //     try {\n  //       const formData = await request.formData();\n  //       console.log(formData,\"formData\");\n  //       const body = Object.fromEntries(formData.entries());\n  //       // Convert image to base64 string\n  // if (imageFile && imageFile.size > 0) {\n  //   const imageBuffer = Buffer.from(await imageFile.arrayBuffer());\n  //   const base64Image = imageBuffer.toString('base64');\n  //   body.image = {\n  //     data: base64Image, // Store as base64 string\n  //     contentType: imageFile.type,\n  //     filename: imageFile.name,\n  //     size: imageFile.size,\n  //     uploadDate: new Date()\n  //   };\n  // }\n  //       const response = await createproduct(body);\n  //       return {\n  //         success: true,\n  //         message: response.message,\n  //       };\n  //     } catch (error) {\n  //       console.error('Error handling Blogs form:', error);\n  //       return {\n  //         success: false,\n  //         error: 'An unexpected error occurred. Please try again later.'\n  //       };\n  //     }\n  //   },\n  createblogs: async ({ request }) => {\n    try {\n      const formData = await request.formData();\n      console.log(formData, \"formData\");\n      const imageFile = formData.get(\"image\");\n      const body = Object.fromEntries(formData.entries());\n      if (imageFile && imageFile.size > 0) {\n        const imageBuffer = Buffer.from(await imageFile.arrayBuffer());\n        const base64Image = imageBuffer.toString(\"base64\");\n        body.image = `data:${imageFile.type};base64,${base64Image}`;\n      }\n      const response = await createproduct(body);\n      return {\n        success: true,\n        message: response.message\n      };\n    } catch (error) {\n      console.error(\"Error handling Blogs form:\", error);\n      return {\n        success: false,\n        error: \"An unexpected error occurred. Please try again later.\"\n      };\n    }\n  },\n  editblog: async ({ request, params }) => {\n    try {\n      const formData = await request.formData();\n      const body = Object.fromEntries(formData.entries());\n      const blogId = body.id || params.id;\n      if (!blogId) {\n        return {\n          success: false,\n          error: \"Blog ID is required to update the blog.\"\n        };\n      }\n      const response = await editproduct(blogId, body);\n      return {\n        success: true,\n        message: response.message\n        // response.message should be from your API or DB update response\n      };\n    } catch (error) {\n      console.error(\"Error editing blog:\", error);\n      return {\n        success: false,\n        error: \"Failed to update blog. Please try again.\"\n      };\n    }\n  },\n  deleteblog: async ({ request, params }) => {\n    try {\n      const formData = await request.formData();\n      const body = Object.fromEntries(formData.entries());\n      const blogId = body.id || params.id;\n      if (!blogId) {\n        return {\n          success: false,\n          error: \"Blog ID is required to delete the blog.\"\n        };\n      }\n      const response = await deleteproduct(blogId);\n      return {\n        success: response.success,\n        message: response.message\n      };\n    } catch (error) {\n      console.error(\"Error deleting blog:\", error);\n      return {\n        success: false,\n        error: \"Failed to delete blog. Please try again.\"\n      };\n    }\n  }\n};\nexport {\n  actions,\n  load\n};\n","import * as server from '../entries/pages/admin/products/_page.server.js';\n\nexport const index = 7;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/admin/products/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/admin/products/+page.server.js\";\nexport const imports = [\"_app/immutable/nodes/7.dyArJ6-L.js\",\"_app/immutable/chunks/1w2tVRpE.js\",\"_app/immutable/chunks/IHki7fMi.js\",\"_app/immutable/chunks/C1FmrZbK.js\",\"_app/immutable/chunks/BoqYbZC7.js\",\"_app/immutable/chunks/B5PH7vek.js\",\"_app/immutable/chunks/BtG5aEW1.js\",\"_app/immutable/chunks/ITkS-TNF.js\",\"_app/immutable/chunks/CzG5mwcR.js\"];\nexport const stylesheets = [\"_app/immutable/assets/Toaster.DQwrSZtH.css\"];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}