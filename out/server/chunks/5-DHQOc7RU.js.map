{"version":3,"file":"5-DHQOc7RU.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/admin/events/_page.server.js","../../../.svelte-kit/adapter-node/nodes/5.js"],"sourcesContent":["import { n as newsroom } from \"../../../../chunks/mongoLoads.js\";\nimport { fail } from \"@sveltejs/kit\";\nimport { d as deleteEvent, a as updateEvent, b as addEvent } from \"../../../../chunks/mongoActions.js\";\nasync function load({ parent, url, fetch }) {\n  const page = url.searchParams.get(\"page\");\n  const search = url.searchParams.get(\"search\");\n  const filter = url.searchParams.get(\"filter\");\n  let news = [];\n  let submissions = [];\n  try {\n    news = await newsroom(page, search, filter);\n  } catch (error) {\n    console.error(\"Failed to load data:\", error);\n    return { data: null, error: error.message || \"An unknown error occurred\" };\n  }\n  return {\n    news,\n    records: submissions\n  };\n}\nconst actions = {\n  addnewsroom: async ({ request }) => {\n    const formData = await request.formData();\n    const fileName = formData.get(\"fileName\");\n    const body = Object.fromEntries(formData);\n    try {\n      console.log(\"Adding news item:\", body);\n      if (!body.newsLink) {\n        body.newsLink = body.title.toLowerCase().replace(/[^a-z0-9\\s-]/g, \"\").replace(/\\s+/g, \"-\").replace(/-+/g, \"-\").replace(/-$/, \"\");\n      }\n      const result = await addEvent(body, fileName);\n      return { status: 200, message: result.message };\n    } catch (error) {\n      console.error(\"Error during news addition:\", error);\n      return fail(500, {\n        error: true,\n        message: error.message || \"Failed to add news item\"\n      });\n    }\n  },\n  updatenewsroom: async ({ request }) => {\n    const formData = await request.formData();\n    const body = Object.fromEntries(formData);\n    try {\n      if (!body.newsLink) {\n        body.newsLink = body.title.toLowerCase().replace(/[^a-z0-9\\s-]/g, \"\").replace(/\\s+/g, \"-\").replace(/-+/g, \"-\").replace(/-$/, \"\");\n      }\n      const result = await updateEvent(body);\n      return { status: 200, message: result.message };\n    } catch (error) {\n      console.error(\"Error during news update:\", error);\n      return fail(500, {\n        error: true,\n        message: error.message || \"Failed to update news item\"\n      });\n    }\n  },\n  deletenews: async ({ request }) => {\n    const body = Object.fromEntries(await request.formData());\n    try {\n      const result = await deleteEvent(body);\n      return result;\n    } catch (error) {\n      console.error(\"Error during user update:\", error);\n    }\n  }\n};\nexport {\n  actions,\n  load\n};\n","import * as server from '../entries/pages/admin/events/_page.server.js';\n\nexport const index = 5;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/admin/events/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/admin/events/+page.server.js\";\nexport const imports = [\"_app/immutable/nodes/5.CjkAFDAy.js\",\"_app/immutable/chunks/1w2tVRpE.js\",\"_app/immutable/chunks/IHki7fMi.js\",\"_app/immutable/chunks/C1FmrZbK.js\",\"_app/immutable/chunks/ITkS-TNF.js\",\"_app/immutable/chunks/0A__LkGO.js\",\"_app/immutable/chunks/CsqAPviS.js\",\"_app/immutable/chunks/DfK6NDbX.js\",\"_app/immutable/chunks/C588L-jF.js\",\"_app/immutable/chunks/CzG5mwcR.js\"];\nexport const stylesheets = [\"_app/immutable/assets/Toaster.DQwrSZtH.css\"];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}